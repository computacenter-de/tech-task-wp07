apiVersion: v1
kind: ConfigMap
metadata:
  name: controller-casc-bundle
data:
  bundle.yaml: |
    apiVersion: "1"
    id: "demo-bundle"
    description: "Autogenerated bundle descriptor"
    version: "1"
    jcasc:
      - "jenkins.yaml"
    plugins:
      - "plugins.yaml"
    items:
      - "items.yaml"

  jenkins.yaml: |
    jenkins:
      agentProtocols:
      - "Diagnostic-Ping"
      - "JNLP4-connect"
      - "OperationsCenter2"
      - "Ping"
      authorizationStrategy:
        loggedInUsersCanDoAnything:
          allowAnonymousRead: false
      clouds:
      - "operationsCenterAgentProvisioningService"
      crumbIssuer:
        standard:
          excludeClientIPFromCrumb: false
      disableRememberMe: false
      labelAtoms:
      - name: "built-in"
      - name: "docker"
      markupFormatter: "plainText"
      mode: NORMAL
      myViewsTabBar: "standard"
      noUsageStatistics: true
      numExecutors: 0
      primaryView:
        all:
          name: "all"
      projectNamingStrategy: "standard"
      quietPeriod: 5
      remotingSecurity:
        enabled: true
      scmCheckoutRetryCount: 0
      securityRealm: "operationsCenter"
      slaveAgentPort: 50000
      updateCenter:
        sites:
        - id: "core-mm-offline"
          url: "file:/tmp/jenkins/war/WEB-INF/plugins/update-center.json"
        - id: "cap-core-mm"
          url: "https://jenkins-updates.cloudbees.com/update-center/envelope-core-mm/update-center.json"
      views:
      - all:
          name: "all"
      viewsTabBar: "standard"
    beekeeper:
      enabled: true
      securityWarnings:
        enabledForCore: true
        enabledForPlugins: true
      upgrades:
        autoDowngradePlugins: false
        autoUpgradePlugins: true
    support:
      automatedBundleConfiguration:
        componentIds:
        - "CloudBeesAssuranceSupport"
        - "CloudBeesCasCBundlesSupport"
        - "CloudBeesCasCUpdateLogBundlesSupport"
        - "AgentsConfigFile"
        - "ConfigFileComponent"
        - "OtherConfigFilesComponent"
        - "AboutBrowser"
        - "AboutJenkins"
        - "AboutUser"
        - "AdministrativeMonitors"
        - "AgentProtocols"
        - "BuildQueue"
        - "CustomLogs"
        - "DumpExportTable"
        - "EnvironmentVariables"
        - "FileDescriptorLimit"
        - "GCLogs"
        - "HeapUsageHistogram"
        - "ItemsContent"
        - "AgentsJVMProcessSystemMetricsContents"
        - "MasterJVMProcessSystemMetricsContents"
        - "JenkinsLogs"
        - "LoadStats"
        - "LoggerManager"
        - "Metrics"
        - "NetworkInterfaces"
        - "NodeMonitors"
        - "OtherLogs"
        - "ReverseProxy"
        - "RootCAs"
        - "RunningBuilds"
        - "SlaveCommandStatistics"
        - "SlaveLaunchLogs"
        - "SlaveLogs"
        - "AgentsSystemConfiguration"
        - "MasterSystemConfiguration"
        - "SystemProperties"
        - "TaskLogs"
        - "ThreadDumps"
        - "UpdateCenter"
        - "UserCount"
        - "ComponentImpl"
        - "SlowRequestComponent"
        - "HighLoadComponent"
        - "DeadlockRequestComponent"
        - "OperationsCenterSupportComponent"
        - "PipelineTimings"
        - "PipelineThreadDump"
        enabled: true
        period: 1
    kube:
      podTemplatesConfiguration:
        templates:
        - containers:
          - args: "9999999"
            command: "sleep"
            envVars:
            - envVar:
                key: "GIT_SSL_NO_VERIFY"
                value: "true"
            image: "docker:27.1.1"
            livenessProbe:
              failureThreshold: 0
              initialDelaySeconds: 0
              periodSeconds: 0
              successThreshold: 0
              timeoutSeconds: 0
            name: "docker"
            workingDir: "/home/jenkins/agent"
          id: "d8b3f411-ce1b-419d-8703-7b10cbc239ad"
          idleMinutes: 2
          idleMinutesStr: "2"
          label: "docker"
          name: "docker"
          yamlMergeStrategy: "override"
    globalCredentialsConfiguration:
      configuration:
        providerFilter: "none"
        typeFilter: "none"
    security:
      anonymizeSupportBundle:
        enabled: false
      apiToken:
        creationOfLegacyTokenEnabled: false
        tokenGenerationOnCreationEnabled: false
        usageStatisticsEnabled: true
      gitHooks:
        allowedOnAgents: false
        allowedOnController: false
      gitHostKeyVerificationConfiguration:
        sshHostKeyVerificationStrategy: "knownHostsFileVerificationStrategy"
      sSHD:
        port: -1
    unclassified:
      buildDiscarders:
        configuredBuildDiscarders:
        - "jobBuildDiscarder"
      cloudBeesSCMReporting:
        enabled: true
      email-ext:
        adminRequiredForTemplateTesting: false
        allowUnregisteredEnabled: false
        charset: "UTF-8"
        debugMode: false
        defaultBody: |-
          $PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS:

          Check console output at $BUILD_URL to view the results.
        defaultContentType: "text/plain"
        defaultSubject: "$PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS!"
        defaultTriggerIds:
        - "hudson.plugins.emailext.plugins.trigger.FailureTrigger"
        maxAttachmentSize: -1
        maxAttachmentSizeMb: -1
        precedenceBulk: false
        watchingEnabled: false
      enrichedSummaryConfig:
        enrichedSummaryEnabled: false
        httpClientDelayBetweenRetriesInSeconds: 1
        httpClientMaxRetries: 3
        httpClientTimeoutInSeconds: 1
      experimentalPlugins:
        enabled: false
      fingerprints:
        fingerprintCleanupDisabled: false
        storage: "file"
      hibernationConfiguration:
        activities:
        - "build"
        - "web"
        enabled: true
        gracePeriod: 40000
      injectionConfig:
        allowUntrusted: false
        enabled: false
        injectCcudExtension: false
        injectMavenExtension: false
      junitTestResultStorage:
        storage: "file"
      mailer:
        charset: "UTF-8"
        useSsl: false
        useTls: false
      pollSCM:
        pollingThreadCount: 10
      scmGit:
        addGitTagAction: false
        allowSecondFetch: false
        createAccountBasedOnEmail: false
        disableGitToolChooser: false
        hideCredentials: false
        showEntireCommitSummaryInChanges: false
        useExistingAccountWithSameEmail: false
      usageStatisticsCloudBees:
        disabledJenkinsUsageStatistics: true
        usageStatisticsCollected: true
    tool:
      cloudbeesPluginUsageAnalyzer:
        enabled: true
      git:
        installations:
        - home: "git"
          name: "Default"
      mavenGlobalConfig:
        globalSettingsProvider: "standard"
        settingsProvider: "standard"

  plugins.yaml: |
    plugins:
    - id: ace-editor
    - id: apache-httpcomponents-client-4-api
    - id: authentication-tokens
    - id: aws-credentials
    - id: aws-java-sdk-ec2
    - id: aws-java-sdk-minimal
    - id: azure-credentials
    - id: azure-keyvault
    - id: azure-sdk
    - id: blueocean-commons
    - id: bootstrap5-api
    - id: bouncycastle-api
    - id: branch-api
    - id: caffeine-api
    - id: checks-api
    - id: cloudbees-administrative-monitors
    - id: cloudbees-analytics
    - id: cloudbees-assurance
    - id: cloudbees-blueocean-default-theme
    - id: cloudbees-casc-client
    - id: cloudbees-casc-items-api
    - id: cloudbees-casc-items-commons
    - id: cloudbees-casc-items-controller
    - id: cloudbees-folder
    - id: cloudbees-folders-plus
    - id: cloudbees-github-reporting
    - id: cloudbees-groovy-view
    - id: cloudbees-jenkins-advisor
    - id: cloudbees-license
    - id: cloudbees-monitoring
    - id: cloudbees-nodes-plus
    - id: cloudbees-platform-common
    - id: cloudbees-platform-data
    - id: cloudbees-plugin-usage
    - id: cloudbees-ssh-slaves
    - id: cloudbees-support
    - id: cloudbees-template
    - id: cloudbees-uc-data-api
    - id: cloudbees-unified-ui
    - id: cloudbees-view-creation-filter
    - id: cloudbees-workflow-template
    - id: cloudbees-workflow-ui
    - id: command-launcher
    - id: commons-lang3-api
    - id: commons-text-api
    - id: credentials
    - id: credentials-binding
    - id: display-url-api
    - id: durable-task
    - id: echarts-api
    - id: email-ext
    - id: font-awesome-api
    - id: git
    - id: git-client
    - id: github
    - id: github-api
    - id: github-branch-source
    - id: gradle
    - id: handy-uri-templates-2-api
    - id: infradna-backup
    - id: instance-identity
    - id: ionicons-api
    - id: jackson2-api
    - id: jakarta-activation-api
    - id: jakarta-mail-api
    - id: javax-activation-api
    - id: javax-mail-api
    - id: jaxb
    - id: jdk-tool
    - id: jjwt-api
    - id: jquery3-api
    - id: junit
    - id: kube-agent-management
    - id: kubernetes
    - id: kubernetes-client-api
    - id: kubernetes-credentials
    - id: ldap
    - id: mailer
    - id: mapdb-api
    - id: matrix-project
    - id: metrics
    - id: mina-sshd-api-common
    - id: mina-sshd-api-core
    - id: mina-sshd-api-scp
    - id: mina-sshd-api-sftp
    - id: nectar-license
    - id: nectar-rbac
    - id: node-iterator-api
    - id: oauth-credentials
    - id: okhttp-api
    - id: operations-center-agent
    - id: operations-center-client
    - id: operations-center-cloud
    - id: operations-center-context
    - id: pipeline-build-step
    - id: pipeline-graph-analysis
    - id: pipeline-groovy-lib
    - id: pipeline-input-step
    - id: pipeline-milestone-step
    - id: pipeline-model-api
    - id: pipeline-model-definition
    - id: pipeline-model-extensions
    - id: pipeline-rest-api
    - id: pipeline-stage-step
    - id: pipeline-stage-tags-metadata
    - id: pipeline-stage-view
    - id: plain-credentials
    - id: plugin-util-api
    - id: popper2-api
    - id: scm-api
    - id: script-security
    - id: snakeyaml-api
    - id: ssh-credentials
    - id: sshd
    - id: structs
    - id: support-core
    - id: token-macro
    - id: trilead-api
    - id: unique-id
    - id: user-activity-monitoring
    - id: variant
    - id: workflow-aggregator
    - id: workflow-api
    - id: workflow-basic-steps
    - id: workflow-cps
    - id: workflow-cps-checkpoint
    - id: workflow-durable-task-step
    - id: workflow-job
    - id: workflow-multibranch
    - id: workflow-scm-step
    - id: workflow-step-api
    - id: workflow-support

  items.yaml: |
    - kind: folder
      name: Backup and Restore
      description: ''
      displayName: Backup and Restore
      items:
      - kind: backupAndRestore
        name: Backup
        blockBuildWhenDownstreamBuilding: false
        blockBuildWhenUpstreamBuilding: false
        buildersList:
        - backupBuilder:
            subjects:
            - buildRecordSubject: {}
            - jobConfigurationSubject: {}
            - systemConfigurationSubject:
                omitMasterKey: true
            format:
              zipFormat: {}
            exclusive: false
            store:
              azureBlobStorageStore:
                folder: ''
                accountName: cloudbees
                containerName: cloudbeesbackup
                credentialsId: BackupStorage
                blobEndPointURL: ''
                useMetadata: false
            retentionPolicy:
              upToNRetentionPolicy:
                n: 3
            safeDelaySeconds: 0
        concurrentBuild: false
        description: ''
        disabled: false
        displayName: Backup
        triggers:
        - cron:
            spec: '@hourly'
      - kind: backupAndRestore
        name: Restore
        blockBuildWhenDownstreamBuilding: false
        blockBuildWhenUpstreamBuilding: false
        buildersList:
        - restoreBuilder:
            ignoreConfirmationFile: true
            preserveJenkinsHome: false
            ignoreDigestCheck: false
            store:
              azureBlobStorageStore:
                folder: ''
                accountName: cloudbees
                containerName: cloudbeesbackup
                credentialsId: BackupStorage
                blobEndPointURL: ''
                useMetadata: false
            restoreDirectory: ''
        concurrentBuild: false
        description: ''
        disabled: false
        displayName: Restore
      properties:
      - envVars: {}
      - itemRestrictions:
          filter: false
      - folderCredentialsProperty:
          folderCredentials:
          - credentials:
            - secretStringCredentials:
                description: ''
                id: 3fef3a43-ba1e-438a-9c81-0204cdfcdabe
                secretIdentifier: https://cariad-wp7.vault.azure.net/secrets/BackupStorage/87ed4f05afe64d0ea9248c32851d9adc
            domain: {}
